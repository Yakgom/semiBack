<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="employeeMapper">
  
  <sql id="employeeColumn">
  	SELECT 
	       EMP_ID empId
	     , EMP_NAME empName
	     , SALARY 
	     , DEPT_TITLE detpCode
	     , JOB_NAME jobCode
	  FROM
	       EMPLOYEE
	  JOIN
	       DEPARTMENT ON DEPT_ID = DEPT_CODE
	  JOIN
	  		 JOB
	       USING (JOB_CODE)
  </sql>
  <sql id="findByColumn">
  SELECT
	       EMP_ID empId
	     , EMP_NAME empName
	     , EMP_NO empNo
	     , EMAIL
	     , PHONE
	     , DEPT_CODE detpCode
	     , JOB_CODE jobCode
	     , SAL_LEVEL salLevel
	     , SALARY
	     , BONUS
	     , MANAGER_ID managerId
	     , HIRE_DATE hireDate
	     , ENT_DATE entDate
	     , ENT_YN  entYn
	  FROM
	       EMPLOYEE
  </sql>
  
  <select id="findAll" resultType="employee">
  		<include refid="findByColumn"></include>
  	   WHERE
	         ENT_YN = 'N'      
	   ORDER     
	 	  BY
	 	     EMP_ID  DESC
  
  </select>
  

  
  <insert id="insertEmployee" parameterType="Employee" >
    INSERT
	  INTO
	       EMPLOYEE
	       (
	       EMP_ID 
	     , EMP_NAME 
	     , EMP_NO 
	     , EMAIL
	     , PHONE
	     , DEPT_CODE
	     , JOB_CODE 
	     , SAL_LEVEL 
	     , SALARY
	     , BONUS
	     , MANAGER_ID
	     , HIRE_DATE
	       )
	VALUES
	       (
	       #{empId}
	     , #{empName}
	     , #{empNo}
	     , #{email}
	     , #{phone}
	     , #{deptCode}
	     , #{jobCode}
	     , #{salLevel}
	     , #{salary}
	     , #{bonus}
	     , #{managerId}
	     , SYSDATE
	       )
  </insert>
  


  
  </mapper>